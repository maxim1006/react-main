"use strict";(self.webpackChunkreact_main=self.webpackChunkreact_main||[]).push([[951],{1951:function(e,t,r){r.r(t),r.d(t,{default:function(){return it}});var n=r(2791),a=r(8687),o=r(4942),u=r(8823),c=r(1996),i=r(2540),s=r(5752),d=r(7781),l=r(9071),p=r(2810),f=Boolean({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_EMULATE);console.log({__emulate__:f});var h,v=f?"http://127.0.0.1:5001/maximprosv-server-ts/us-central1/functionsApp":"http://localhost:3005",y="/api/v1",m=(0,l.createApi)({reducerPath:"api",baseQuery:(0,l.fetchBaseQuery)({baseUrl:"".concat(v).concat(y),prepareHeaders:function(e,t){t.extra,t.endpoint,t.getState;return e.set("Content-Type","application/json;charset=UTF-8"),e.set("Authorization","anonymous"),e.set("X-Request-ID",(0,p.Z)()),e}}),tagTypes:["User"],endpoints:function(e){return{}}}),g=(0,u.createSlice)({name:"counter",initialState:0,reducers:{incrementAction:function(e){return e+1},decrementAction:function(e){return e-1}}}),x=g.reducer,b=g.actions,Z=(b.incrementAction,b.decrementAction,(0,u.createSlice)({name:"todos",initialState:{entities:[]},reducers:{addTodoAction:function(e,t){var r=t.payload;e.entities.push(r)},addTodoPreparedAction:{reducer:function(e,t){var r=t.payload,n=r.id,a=r.text;e.entities.push({id:n,text:a,completed:!1})},prepare:function(e){return{payload:{text:e,id:"".concat(Math.random()*Date.now())}}}},toggleTodoAction:function(e,t){var r=t.payload,n=e.entities.find((function(e){return e.id===r}));n&&(n.completed=!n.completed)}}})),k=Z.actions,S=(k.addTodoPreparedAction,k.toggleTodoAction,k.addTodoAction,Z.reducer),A=(0,u.createSlice)({name:"visibilityFilter",initialState:"SHOW_ALL",reducers:{setVisibilityFilterAction:function(e,t){return t.payload}}}),U=(A.actions.setVisibilityFilterAction,A.reducer),P={org:"rails",repo:"rails",page:1,displayType:function(e){return e.Issues="issues",e.Comments="comments",e}({}).Issues,issueId:null},j=(0,u.createSlice)({name:"issuesDisplay",initialState:P,reducers:{displayRepo:function(e,t){var r=t.payload,n=r.org,a=r.repo;e.org=n,e.repo=a},setCurrentPage:function(e,t){e.page=t.payload},setCurrentDisplayType:function(e,t){var r=t.payload,n=r.displayType,a=r.issueId,o=void 0===a?null:a;e.displayType=n,e.issueId=o}}}),C=j.actions,T=(C.displayRepo,C.setCurrentPage,C.setCurrentDisplayType,j.reducer),w=r(4165),E=r(5861),L=r(6588),D=r(873),_=(0,u.createAsyncThunk)("posts/fetchAll",function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r){var n,a;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.Z.get("https://jsonplaceholder.typicode.com/posts");case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",r.rejectWithValue(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),F=(0,u.createSlice)({name:"posts",initialState:{loading:!1,entities:[]},reducers:{fetchPostsStart:function(e){e.loading=!0},fetchPostsSuccess:function(e,t){var r=t.payload;e.entities=r,e.loading=!1},fetchPostsError:function(e,t){var r=t.payload;e.error=r,e.loading=!1}},extraReducers:(h={},(0,o.Z)(h,_.pending.type,(function(e,t){var r=t.payload;e.error=r,e.loading=!0})),(0,o.Z)(h,_.fulfilled.type,(function(e,t){var r=t.payload;e.entities=r,e.loading=!1})),(0,o.Z)(h,_.rejected.type,(function(e,t){var r=t.payload;e.error=r,e.loading=!1})),h)}),I=F.actions,R=I.fetchPostsSuccess,O=I.fetchPostsError,N=I.fetchPostsStart,M=F.reducer,q=function(e){return e.posts},Q=function(){return(0,D.P1)([q,function(e,t){return t}],(function(e,t){var r;return null===(r=e.entities)||void 0===r?void 0:r.filter((function(e){return e.title.includes(t)}))}))},B=(0,D.P1)([q,function(e,t){return t}],(function(e,t){var r;return null===(r=e.entities)||void 0===r?void 0:r.filter((function(e){return e.title.includes(t)}))})),W=r(5987),z=["id"],V=(0,u.createEntityAdapter)({sortComparer:function(e,t){return e.title.localeCompare(t.title)}}),K=(0,u.createAsyncThunk)("books/fetchAll",function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.resolve([{id:"1",title:"title1"},{id:"2",title:"title2"},{id:"3",title:"title3"}]);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r.rejectWithValue(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),H=(0,u.createAsyncThunk)("books/updateOne",function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),J=V.getInitialState({loading:!1}),X=(0,u.createSlice)({name:"books",initialState:J,reducers:{removeBookAction:V.removeOne,addBookAction:V.addOne,updateBookAction:V.updateOne},extraReducers:function(e){e.addCase(K.pending,(function(e,t){e.loading=!0})),e.addCase(K.fulfilled,(function(e,t){var r=t.payload;V.upsertMany(e,r),e.loading=!1})),e.addCase(H.fulfilled,(function(e,t){var r=t.payload,n=r.id,a=(0,W.Z)(r,z);V.updateOne(e,{id:n,changes:a})}))}}),Y=X.reducer,G=X.actions,$=(G.removeBookAction,G.addBookAction,G.updateBookAction,V.getSelectors((function(e){return e.books}))),ee=($.selectById,$.selectIds,$.selectEntities,$.selectAll,$.selectTotal,"".concat(v).concat(y,"/users")),te=(0,u.createAsyncThunk)("thunkUser/fetchAll",function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(ee);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",r.rejectWithValue(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()),re=(0,u.createAsyncThunk)("thunkUser/add",function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(ee,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",r.rejectWithValue(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()),ne=(0,u.createAsyncThunk)("thunkUser/update",function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(ee,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",r.rejectWithValue(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()),ae=(0,u.createAsyncThunk)("thunkUser/delete",function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(ee,"/").concat(t.id),{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",r.rejectWithValue(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}());function oe(e){return e.type.endsWith("/pending")}function ue(e){return e.type.endsWith("/fulfilled")}var ce=["id"],ie=(0,u.createEntityAdapter)(),se=ie.getInitialState({loading:!1}),de=(0,u.createSlice)({name:"thunkUser",initialState:se,reducers:{},extraReducers:function(e){e.addCase(te.fulfilled,ie.upsertMany),e.addCase(re.fulfilled,ie.addOne),e.addCase(ne.fulfilled,(function(e,t){var r=t.payload,n=r.id,a=(0,W.Z)(r,ce);ie.updateOne(e,{id:n,changes:a})})),e.addCase(ae.fulfilled,(function(e,t){var r=t.payload;ie.removeOne(e,r.id)})),e.addMatcher(oe,(function(e){e.loading=!0})),e.addMatcher(ue,(function(e){e.loading=!1}))}}).reducer,le=(ie.getSelectors((function(e){return e.thunkUser})).selectAll,r(1413)),pe=function(e){return e.Product1="product1",e.Product2="product2",e}({}),fe=(0,u.createEntityAdapter)(),he=fe.getInitialState();console.log({product1InnerPropAdapterInitialState:he});var ve=(0,u.createSlice)({name:"product/feature",initialState:null,reducers:{setProductFeatureNameAction:function(e,t){e.name=t.payload}}}),ye=ve.reducer,me=(ve.actions.setProductFeatureNameAction,(0,u.createSlice)({name:"product/product1",initialState:{},reducers:{setProduct1innerPropAction:function(e,t){fe.setMany(e.product1InnerProp,t.payload)},setProduct1PropAction:function(e,t){e.prop=t.payload}},extraReducers:function(e){e.addDefaultCase((function(e,t){ye(e,t)}))}})),ge=me.reducer,xe=me.actions,be=(xe.setProduct1innerPropAction,xe.setProduct1PropAction,(0,u.createEntityAdapter)({})),Ze=(be.getInitialState(),(0,u.createSlice)({name:"product/product2",initialState:null,reducers:{setProduct2innerPropAction:function(e,t){be.setMany(e.product2InnerProp,t.payload)}},extraReducers:function(e){e.addDefaultCase((function(e,t){ye(e,t)}))}})),ke=Ze.reducer,Se=(Ze.actions.setProduct2innerPropAction,(0,u.createAction)("product/setProductAction")),Ae=((0,u.createAction)("product/resetProductAction"),{type:pe.Product1,product1InnerProp:he}),Ue=(0,u.createSlice)({name:"product",initialState:Ae,reducers:{setProductTypeAction:function(e,t){e.type=t.payload}},extraReducers:function(e){e.addCase(Se,(function(e,t){return(0,le.Z)((0,le.Z)({},e),t.payload)})),e.addDefaultCase((function(e,t){return function(e,t){switch(null===e||void 0===e?void 0:e.type){case pe.Product1:return ge(e,t);case pe.Product2:return ke(e,t)}}(e,t)}))}}),Pe=(Ue.actions.setProductTypeAction,Ue.reducer),je=r(9439),Ce=r(3433),Te=r(7762),we=function(e){return e.XRequestId="x-request-id",e}({}),Ee=function(e){return e.ConditionError="ConditionError",e}({}),Le=[],De=function(e){return function(e){return function(t){var r,n,a,o,c,i,s=null===(r=t.meta)||void 0===r||null===(n=r.baseQueryMeta)||void 0===n||null===(a=n.request)||void 0===a?void 0:a.headers,d=null===(o=t.meta)||void 0===o||null===(c=o.baseQueryMeta)||void 0===c||null===(i=c.response)||void 0===i?void 0:i.headers;if((0,u.isRejected)(t)){var l;if(s){var p,f=(0,Te.Z)(s);try{for(f.s();!(p=f.n()).done;){var h=p.value;console.log("headersReq",h)}}catch(g){f.e(g)}finally{f.f()}}if(d){var v,y=(0,Te.Z)(d);try{for(y.s();!(v=y.n()).done;){var m=v.value;console.log("headersRes",m)}}catch(g){y.e(g)}finally{y.f()}}t.error.name===Ee.ConditionError||Le.includes(null===(l=t.meta.arg)||void 0===l?void 0:l.endpointName)||function(e){var t,r,n,a,o=e.meta;if(!o)return console.error("logRequestError Action doesn't contain 'meta'",e);var u=o.baseQueryMeta,c=u.request,i=u.response;if(!c&&!i)return console.error("Request/response error: ".concat(o.baseQueryMeta));var s=null!==c&&void 0!==c?c:{},d=s.method,l=s.url,p=null!==i&&void 0!==i?i:{},f=p.status,h=p.statusText,v=(null===(t=e.meta)||void 0===t||null===(r=t.baseQueryMeta)||void 0===r||null===(n=r.request)||void 0===n?void 0:n.headers)||[],y=null===(a=(0,Ce.Z)(v).find((function(e){return(0,je.Z)(e,1)[0]===we.XRequestId})))||void 0===a?void 0:a[1];console.group("ERROR: ".concat(d," ").concat(l)),console.log("STATUS: ".concat(f)),console.log("STATUS-TEXT: ".concat(h)),console.log("X-REQUEST-ID: ".concat(y)),o.arg&&console.log("RTK QUERY: ".concat(o.arg.type," ").concat(o.arg.endpointName));e.payload&&(console.groupCollapsed("PAYLOAD"),console.log(JSON.stringify(e.payload,null,4)),console.groupEnd());console.groupEnd()}(t)}return e(t)}}};var _e={key:"root",version:1,storage:s.Z,whitelist:["todos"]},Fe=(0,d.UY)((0,o.Z)({counter:x,todos:S,visibilityFilter:U,issuesDisplay:T,posts:M,books:Y,thunkUser:de,product:Pe},m.reducerPath,m.reducer)),Ie=(0,i.OJ)(_e,Fe),Re=(0,u.configureStore)({reducer:Ie,preloadedState:{},middleware:function(e){return e({thunk:{extraArgument:{fetchPolicy:"cache-first"}},immutableCheck:!1,serializableCheck:{ignoredActions:[i._P,i.I2,i.E7,i.ex,i.e,i.Nz]}}).concat(m.middleware,De)},devTools:!1,enhancers:[c.reduxBatch]}),Oe=(0,i.p5)(Re),Ne=Re,Me=a.useSelector,qe=r(6994),Qe=r(797);function Be(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var u=(0,n.useMemo)(e,[e]);return(0,a.useSelector)((function(e){return u.apply(void 0,[e].concat(r))}))}var We=r(184),ze=function(){var e=(0,n.useState)(""),t=(0,je.Z)(e,2),r=t[0],o=t[1],u=(0,a.useDispatch)(),c=(0,a.useSelector)(q),i=c.loading,s=c.entities,d=c.error;return(0,n.useEffect)((function(){(0,E.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r){var n,a;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(N()),e.prev=1,e.next=4,L.Z.get("https://jsonplaceholder.typicode.com/posts");case 4:return n=e.sent,a=n.data,t(R(a)),e.abrupt("return",a);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0 instanceof Error&&t(O(e.t0)),console.error("error ",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}());case 2:return e.sent,e.next=5,u(_());case 5:e.sent;case 6:case"end":return e.stop()}}),e)})))()}),[u]),d?(0,We.jsx)(We.Fragment,{children:d}):i?(0,We.jsx)(Qe.Z,{}):(0,We.jsxs)("ul",{children:[(0,We.jsx)("button",{onClick:function(){return o((function(e){return e+"a"}))},children:"Click"}),(0,We.jsx)(Ve,{prop:r}),(0,We.jsx)(Ke,{}),s.slice(0,5).map((function(e){var t=e.id,r=e.title,n=e.body;return(0,We.jsxs)("li",{style:{margin:10},children:[(0,We.jsx)("h5",{children:r}),(0,We.jsx)("p",{children:n})]},t)}))]})};function Ve(e){var t=e.prop,r=Be(Q,t),a=Me((function(e){return B(e,t)}));return(0,We.jsxs)(We.Fragment,{children:[a.map((function(e){return(0,We.jsx)(n.Fragment,{children:e.title},e.id)})),r.map((function(e){return(0,We.jsx)(n.Fragment,{children:e.title},e.id)}))]})}function Ke(e){var t=e.prop,r=void 0===t?"a":t,a=Be(Q,r),o=Me((function(e){return B(e,r)}));return(0,We.jsxs)(We.Fragment,{children:[o.map((function(e){return(0,We.jsx)(n.Fragment,{children:e.title},e.id)})),a.map((function(e){return(0,We.jsx)(n.Fragment,{children:e.title},e.id)}))]})}var He=(0,n.memo)(ze),Je="user-list_block__yGNeD",Xe="user-list_list__cbBd9",Ye="user-list_listItem__5zIaF",Ge="user-list_button__paQSC",$e="user_user__D2osa",et=(0,n.memo)((function(e){var t=e.model,r=e.deleteUser,a=e.updateUser,o=t.name,u=(0,n.useState)(),c=(0,je.Z)(u,2),i=c[0],s=c[1],d=(0,n.useState)(o),l=(0,je.Z)(d,2),p=l[0],f=l[1],h=(0,n.useState)(!1),v=(0,je.Z)(h,2),y=v[0],m=v[1];return i?(0,We.jsxs)("div",{className:$e,children:[(0,We.jsx)("input",{type:"text",value:p,onChange:function(e){var t=e.target.value.trim();t&&f(t)}}),(0,We.jsx)("button",{type:"button",onClick:function(){p&&(null===a||void 0===a||a((0,le.Z)((0,le.Z)({},t),{},{name:p})))},children:"Update"}),(0,We.jsx)("button",{onClick:function(){s(!1)},type:"button",children:"Cancel"})]}):(0,We.jsxs)("div",{className:$e,onClick:function(){return m((function(e){return!e}))},children:[(0,We.jsx)("div",{children:o}),y&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("button",{onClick:function(){s(!0)},type:"button",children:"Edit"}),(0,We.jsx)("button",{onClick:function(){return null===r||void 0===r?void 0:r(t)},type:"button",children:"Delete"})]})]})})),tt=r(763),rt=m.injectEndpoints({endpoints:function(e){return{fetchUserList:e.query({query:function(){return{url:"users"}}}),fetchUser:e.query({queryFn:function(e,t,r,n){return(0,E.Z)((0,w.Z)().mark((function r(){var a,o,u;return(0,w.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.userId,t.dispatch,t.getState,r.next=4,n({url:"users/".concat(a),method:"GET"});case 4:if(!(o=r.sent).error){r.next=7;break}return r.abrupt("return",o);case 7:return u=o.data,r.abrupt("return",{data:u});case 9:case"end":return r.stop()}}),r)})))()}}),addUser:e.mutation({query:function(e){return{url:"users",method:"POST",body:e.user}},onQueryStarted:function(e,t){return(0,E.Z)((0,w.Z)().mark((function r(){var n,a,o,u;return(0,w.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.user,n=t.dispatch,a=t.queryFulfilled,r.prev=2,r.next=5,a;case 5:o=r.sent,u=o.data,n(rt.util.updateQueryData("fetchUserList",void 0,(function(e){e.push(u)}))),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),console.error("addUser onQueryStarted error");case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}),addUserDebounced:e.mutation({queryFn:function(e,t,r,n){return(0,E.Z)((0,w.Z)().mark((function r(){var a,o,u,c;return(0,w.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.user,u=t.dispatch,t.getState,r.next=4,nt(o,u,n);case 4:if(r.t1=a=r.sent,r.t0=null!==r.t1,!r.t0){r.next=8;break}r.t0=void 0!==a;case 8:if(!r.t0){r.next=12;break}r.t2=a,r.next=13;break;case 12:r.t2=null;case 13:return c=r.t2,r.abrupt("return",{data:c});case 15:case"end":return r.stop()}}),r)})))()}}),updateUser:e.mutation({query:function(e){return{url:"users",method:"PUT",body:e.user}},onQueryStarted:function(e,t){return(0,E.Z)((0,w.Z)().mark((function r(){var n,a,o,u;return(0,w.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.user,a=t.dispatch,o=t.queryFulfilled,u=a(rt.util.updateQueryData("fetchUserList",void 0,(function(e){var t=e.findIndex((function(e){return e.id===n.id}));e[t]=n}))),r.prev=3,r.next=6,o;case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(3),u.undo();case 11:case"end":return r.stop()}}),r,null,[[3,8]])})))()}}),deleteUser:e.mutation({queryFn:function(e,t,r,n){return(0,E.Z)((0,w.Z)().mark((function r(){var a,o,u;return(0,w.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.dispatch,t.getState,r.next=3,n({url:"users/".concat(e.id),method:"DELETE"});case 3:if(!(o=r.sent).error){r.next=6;break}return r.abrupt("return",o);case 6:return u=o.data,a(rt.util.updateQueryData("fetchUserList",void 0,(function(t){return t.filter((function(t){return t.id!==e.id}))}))),r.abrupt("return",{data:u});case 9:case"end":return r.stop()}}),r)})))()}})}}}),nt=(0,tt.debounce)(function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t,r,n){var a,o;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({url:"users",method:"POST",body:t});case 2:if(!(a=e.sent).error){e.next=5;break}throw a.error;case 5:return o=a.data,r(rt.util.updateQueryData("fetchUserList",void 0,(function(e){e.push(o)}))),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),1e3),at=function(e){return rt.endpoints.fetchUserList.select()(e).isLoading};var ot=function(){var e=function(){var e,t,r=(0,n.useState)(0),o=(0,je.Z)(r,2),u=o[0],c=o[1],i=rt.useFetchUserListQuery(),s=i.data,d=void 0===s?[]:s,l=i.isLoading,p=(0,a.useSelector)(at),f=rt.useFetchUserQuery({userId:null!==(e=null===(t=d[0])||void 0===t?void 0:t.id)&&void 0!==e?e:null},{pollingInterval:u}),h=f.data,v=f.isLoading,y=f.isFetching,m=rt.useLazyFetchUserQuery(),g=(0,je.Z)(m,2),x=g[0],b=g[1],Z=rt.useAddUserMutation({fixedCacheKey:"userMutation"}),k=(0,je.Z)(Z,2),S=k[0],A=k[1].isLoading,U=rt.useAddUserDebouncedMutation({fixedCacheKey:"userMutation"}),P=(0,je.Z)(U,2),j=P[0],C=P[1].isLoading,T=rt.useDeleteUserMutation({fixedCacheKey:"userMutation"}),L=(0,je.Z)(T,2),D=L[0],_=L[1].isLoading,F=rt.useUpdateUserMutation({fixedCacheKey:"userMutation"}),I=(0,je.Z)(F,2),R=I[0],O=I[1].isLoading,N=(0,n.useRef)(null),M=(0,n.useCallback)((function(){var e,t=null===(e=N.current)||void 0===e?void 0:e.value.trim();t&&S({user:{name:t}})}),[S]),q=(0,n.useCallback)((function(){var e,t=null===(e=N.current)||void 0===e?void 0:e.value.trim();t&&j({user:{name:t}})}),[j]),Q=(0,n.useCallback)((0,E.Z)((0,w.Z)().mark((function e(){var t,r,n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({userId:null!==(t=null===(r=d[0])||void 0===r?void 0:r.id)&&void 0!==t?t:null});case 2:n=e.sent,console.log({lazyUser:n});case 4:case"end":return e.stop()}}),e)}))),[x,d]),B=(0,n.useCallback)(function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t){var r;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R({user:t}).unwrap().catch((function(e){return console.log(e)}));case 2:r=e.sent,console.log({updatedUser:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[R]),W=(0,n.useCallback)(function(){var e=(0,E.Z)((0,w.Z)().mark((function e(t){var r;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:"error"in(r=e.sent)&&console.error("delete use error"),console.log(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[D]);(0,n.useEffect)((function(){console.log({user:h,userLoading:v,userFetching:y})}),[h,v,y]),(0,n.useEffect)((function(){console.log({addUserLoading:A,deleteUserLoading:_,updateUserLoading:O,addUserDebouncedLoading:C})}),[A,_,O,C]),(0,n.useEffect)((function(){console.log("in useEffect ",{lazyUser:b})}),[b]);var z=(0,n.useCallback)((0,E.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(1e3));case 1:case"end":return e.stop()}}),e)}))),[]),V=(0,n.useCallback)((0,E.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(0));case 1:case"end":return e.stop()}}),e)}))),[]);return{ref:N,users:d,usersLoading:l,usersLoading2:p,addUserLoading:A,deleteUserLoading:_,updateUserLoading:O,addUserDebouncedLoading:C,onAddUser:M,onAddUserDebounced:q,onDeleteUser:W,onUpdateUser:B,onFetchUserLazy:Q,onPollingStart:z,onPollingEnd:V}}(),t=e.ref,r=e.users,o=(e.usersLoading,e.usersLoading2),u=e.addUserLoading,c=e.addUserDebouncedLoading,i=e.deleteUserLoading,s=e.updateUserLoading,d=e.onAddUser,l=e.onAddUserDebounced,p=e.onUpdateUser,f=e.onDeleteUser,h=e.onFetchUserLazy,v=e.onPollingStart,y=e.onPollingEnd;return(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("button",{type:"button",className:Ge,onClick:v,children:"Start Polling"}),(0,We.jsx)("button",{type:"button",className:Ge,onClick:y,children:"End Polling"}),(0,We.jsx)("button",{type:"button",className:Ge,onClick:h,children:"Fetch Lazy User)"})]}),(0,We.jsxs)("div",{className:Je,children:[(0,We.jsx)("input",{type:"text",ref:t,placeholder:"User Name"}),(0,We.jsx)("button",{type:"button",className:Ge,onClick:d,children:"Add user"}),(0,We.jsx)("button",{type:"button",className:Ge,onClick:l,children:"Add Debounced user"})]}),(0,We.jsx)("div",{className:Je,children:o||u||i||s||c?(0,We.jsx)(We.Fragment,{children:"Loading..."}):(0,We.jsx)("ul",{className:Xe,children:r.map((function(e){return(0,We.jsx)("li",{className:Ye,children:(0,We.jsx)(et,{model:e,updateUser:p,deleteUser:f})},e.id)}))})})]})},ut=(0,n.memo)(ot),ct=function(){return(0,We.jsx)(a.Provider,{store:Ne,children:(0,We.jsxs)(qe.r,{loading:null,persistor:Oe,children:[(0,We.jsx)(ut,{}),(0,We.jsx)(He,{})]})})},it=(0,n.memo)(ct)}}]);
//# sourceMappingURL=951.b1f31572.chunk.js.map