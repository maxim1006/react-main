{"version":3,"file":"static/js/174.4107c6cd.chunk.js","mappings":"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","sources":["components/tabs/Tabs.js","hooks/storage.ts","services/storage.service.ts","hooks/local-storage-service.hook.ts","webpack://react-main/./src/components/storage-hook/storage-hook-problem.module.scss?c3f0","hooks/local-storage-useSyncExternalStore.hook.ts","components/storage-hook/storage-hook-problem.component.tsx","components/storage-hook/storage-hook.component.tsx","pages/ReactPage.tsx"],"sourcesContent":["import { Component, Children } from 'react';\nimport './Tabs.scss';\n\nexport class TabsComponent extends Component {\n    state = {\n        activeTab: 0,\n    };\n\n    componentDidMount() {\n        const { activeTab } = this.props;\n\n        if (activeTab !== undefined) {\n            this.setState({ activeTab });\n        }\n    }\n\n    render() {\n        const { children } = this.props;\n\n        if (children) {\n            const tabsHeader = [];\n            const tabsBody = [];\n\n            // вспомогательная функция для работы с чайлдами\n            Children.map(children, (child, index) => {\n                tabsHeader.push(this.getTabsHeaderView(child, index));\n                tabsBody.push(this.getTabsBody(child, index));\n            });\n\n            return (\n                <div className='tabs'>\n                    <div className='tabs__header'>{tabsHeader}</div>\n                    <div className='tabs__content'>{tabsBody}</div>\n                </div>\n            );\n        }\n    }\n\n    getTabsHeaderView(child, index) {\n        return (\n            <div\n                onClick={this.onClick.bind(this, index)}\n                key={crypto.randomUUID()}\n                className={`tabs__header-item${index === this.state.activeTab ? ' _active' : ''}`}\n            >\n                {child.props.tabName}\n            </div>\n        );\n    }\n\n    getTabsBody(child, index) {\n        if (index === this.state.activeTab) {\n            return (\n                <div className='tabs__content-item' key={index}>\n                    {child.props.children}\n                </div>\n            );\n        }\n        return '';\n    }\n\n    onClick = index => {\n        // Если вдруг захочу в процессе апдейта стейта использовать стейт или проперти, обязательно\n        // через функцию это делаю\n        this.setState((prevState, prevProps) => ({\n            activeTab: index,\n        }));\n    };\n}\n","import { useCallback, useState, useEffect } from 'react';\n\nexport function useLocalStorage(key: string, defaultValue?: any) {\n    return useStorage(key, defaultValue, window.localStorage);\n}\n\nexport function useSessionStorage(key: string, defaultValue?: any) {\n    return useStorage(key, defaultValue, window.sessionStorage);\n}\n\nfunction useStorage(key: string, defaultValue: any, storageObject: any) {\n    const [value, setValue] = useState(() => {\n        const jsonValue = storageObject.getItem(key);\n\n        if (jsonValue != null) return JSON.parse(jsonValue);\n\n        if (typeof defaultValue === 'function') {\n            return defaultValue();\n        } else {\n            return defaultValue;\n        }\n    });\n\n    useEffect(() => {\n        if (value === undefined) return storageObject.removeItem(key);\n        storageObject.setItem(key, JSON.stringify(value));\n    }, [key, value, storageObject]);\n\n    const remove = useCallback(() => {\n        setValue(undefined);\n    }, []);\n\n    return [value, setValue, remove];\n}\n","class StorageService {\n    private listeners: {\n        itemKey: string;\n        callback: (item: any) => void;\n    }[] = [];\n\n    public addListener(itemKey: string, callback: (item: any) => void): void {\n        this.listeners.push({\n            itemKey,\n            callback,\n        });\n    }\n\n    public removeListener(itemKey: string, callback: (item: any) => void): void {\n        this.listeners = this.listeners.filter(\n            listener => listener.itemKey !== itemKey && listener.callback !== callback\n        );\n    }\n\n    public read<T>(itemKey: string): T | null | undefined {\n        try {\n            return JSON.parse(window.localStorage.getItem(itemKey) || 'null');\n        } catch (e) {\n            console.error('Reading LocalStorage error ', e);\n        }\n    }\n\n    public write<T>(itemKey: string, item: T): void {\n        try {\n            localStorage.setItem(itemKey, JSON.stringify(item));\n        } catch (e) {\n            console.error('Writing LocalStorage error ', e);\n        }\n\n        this.listeners.forEach(listener => {\n            if (listener.itemKey === itemKey) listener.callback(item);\n        });\n    }\n}\n\nconst service = new StorageService();\n\nexport default service;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport storageService from '@app/services/storage.service';\n\nexport const useLocalStorageService = <T>(\n    propName: string\n): [T | undefined | null, React.Dispatch<T | undefined | null>] => {\n    const [value, setValue] = useState<T | undefined | null>(() => storageService.read(propName));\n\n    const setCurrentValue = useCallback(\n        (val: T | null | undefined) => {\n            const valueToStore = typeof val === 'function' ? val(value) : val;\n            storageService.write(propName, valueToStore);\n        },\n        [propName, value]\n    );\n\n    useEffect(() => {\n        const listener = (propValue: T) => setValue(propValue);\n\n        storageService.addListener(propName, listener);\n\n        return () => storageService.removeListener(propName, listener);\n    }, [propName]);\n\n    return [value, setCurrentValue];\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"childHost\":\"storage-hook-problem_childHost__-N1pQ\"};","import { Dispatch, SetStateAction, useCallback, useEffect, useSyncExternalStore } from 'react';\n\n/**\n * Hook for working with the localeStorage\n *\n * Usage:\n *\n * 1) Easy to use\n * const [state, setState] = useLocalStorageUseSyncExternalStore('key', 'defaultValue');\n *\n * 2) Example of deleting a value from a store\n * setState(undefined)\n *\n */\nexport function useLocalStorageUseSyncExternalStore<T>(\n    key: string,\n    initialValue: T,\n): [T | undefined, Dispatch<SetStateAction<T | undefined>>] {\n    const getSnapshot = () => readFromLocalStorage<T>(key);\n\n    const store = useSyncExternalStore(useLocalStorageSubscribe, getSnapshot, getLocalStorageServerSnapshot);\n\n    const setState = useCallback(\n        (setNewValue: SetStateAction<T | undefined>) => {\n            const nextState = setNewValue instanceof Function ? setNewValue(store) : setNewValue;\n\n            if (nextState === undefined || nextState === null) {\n                removeLocalStorageItem(key);\n            } else {\n                setLocalStorageItem(key, nextState);\n            }\n        },\n        [key, store],\n    );\n\n    useEffect(() => {\n        if (readFromLocalStorage(key) === null && typeof initialValue !== 'undefined') {\n            setLocalStorageItem(key, initialValue);\n        }\n    }, [key, initialValue]);\n\n    if (typeof window === 'undefined') {\n        return [initialValue, (): void => {}];\n    }\n\n    return [store, setState];\n}\n\n// helpers\nconst useLocalStorageSubscribe = (callback: () => void) => {\n    if (typeof window === 'undefined') {\n        return () => {};\n    }\n\n    window.addEventListener('storage', callback);\n    return () => window.removeEventListener('storage', callback);\n};\n\nconst readFromLocalStorage = <T>(itemKey: string): T | undefined => {\n    if (typeof window === 'undefined') {\n        return;\n    }\n\n    try {\n        const value = JSON.parse(window.localStorage.getItem(itemKey) || 'null');\n\n        return value ?? '';\n    } catch (e) {\n        console.error('Error while retrieving from the LocalStorage ', e);\n    }\n};\nconst setLocalStorageItem = <T>(key: string, value: T): void => {\n    if (typeof window === 'undefined') {\n        return;\n    }\n\n    try {\n        const stringifiedValue = JSON.stringify(value);\n        window.localStorage.setItem(key, stringifiedValue);\n        dispatchStorageEvent(key, stringifiedValue);\n    } catch (e) {\n        console.error('Error while writing to the LocalStorage ', e);\n    }\n};\n\nconst removeLocalStorageItem = (key: string): void => {\n    if (typeof window === 'undefined') {\n        return;\n    }\n\n    try {\n        window.localStorage.removeItem(key);\n        dispatchStorageEvent(key, null);\n    } catch (e) {\n        console.error('Error while retrieving from the LocalStorage ', e);\n        return;\n    }\n};\n\nconst dispatchStorageEvent = <T extends string | null | undefined>(key: string, newValue: T): void => {\n    if (typeof window === 'undefined') {\n        return;\n    }\n\n    window.dispatchEvent(new StorageEvent('storage', { key, newValue }));\n};\n\nconst getLocalStorageServerSnapshot = () => {\n    return undefined;\n};\n","import React, { memo, FC, Dispatch } from 'react';\nimport { useLocalStorage } from '@app/hooks/storage';\nimport { useLocalStorageService } from '@app/hooks/local-storage-service.hook';\nimport styles from './storage-hook-problem.module.scss';\nimport { useLocalStorageUseSyncExternalStore } from '@app/hooks/local-storage-useSyncExternalStore.hook';\n\ntype StorageHookProblemProps = {};\n\nconst StorageHookProblem: FC<StorageHookProblemProps> = () => {\n    const [value, setValue] = useLocalStorage('prop1');\n\n    return (\n        <>\n            <h4>Problem</h4>\n            <p>Value changes in parent its ok</p>\n            <input onChange={e => setValue(e.target.value)} type='text' />\n            <Child1 parentProp={value} setValue={setValue} />\n            <Child2 parentProp={value} setValue={setValue} />\n        </>\n    );\n};\n\nfunction Child1({ parentProp, setValue }: { parentProp: string; setValue: Dispatch<any> }) {\n    const [valueInner, setValueInner] = useLocalStorage('prop1');\n    const [valueService, setValueService] = useLocalStorageService<string>('service');\n    const [valueServiceObj, setValueService1] = useLocalStorageService<{ prop?: string }>('serviceObj');\n    // тут еще прикольно что он в соседней вкладке тоже сработает за счет storage эвента\n    const [useLocalStorageUseSyncExternalStoreState, setUseLocalStorageUseSyncExternalStoreState] =\n        useLocalStorageUseSyncExternalStore('useLocalStorageUseSyncExternalStore', '');\n\n    return (\n        <section className={styles.childHost}>\n            <h4>Props in Child1</h4>\n            <article>\n                <h4>parentProp:</h4>\n                <p>Работает, но надо передавать и value и setValue из родителя вглубь всех чайлдов</p>\n                <input value={parentProp} onChange={e => setValue(e.target.value)} type='text' />\n            </article>\n            <article>\n                <h4>valueInner works only in component:</h4>\n                <p>\n                    Проблемный пример использую обычный useLocalStorage и да меняется значение в localStorage но не\n                    меняется в sibling\n                </p>\n                <input value={valueInner} onChange={e => setValueInner(e.target.value)} type='text' />\n            </article>\n            <article>\n                <h4>useSyncExternalStoreState solves the problem:</h4>\n                <p>Правильный пример c useSyncExternalStoreState</p>\n                <input\n                    value={useLocalStorageUseSyncExternalStoreState || ''}\n                    onChange={e => setUseLocalStorageUseSyncExternalStoreState(e.target.value)}\n                    type='text'\n                />\n            </article>\n            <article>\n                <h4>valueService solves the problem:</h4>\n                <p>Правильный пример c valueService</p>\n                <input value={valueService || ''} onChange={e => setValueService(e.target.value)} type='text' />\n            </article>\n            <article>\n                <h4>valueServiceObj:</h4>\n                <p>Правильный пример c объектом в valueService</p>\n                <input\n                    value={valueServiceObj?.prop}\n                    onChange={e => setValueService1({ prop: e.target.value })}\n                    type='text'\n                />\n            </article>\n        </section>\n    );\n}\n\nfunction Child2({ parentProp, setValue }: { parentProp: string; setValue: Dispatch<any> }) {\n    const [valueInner, setValueInner] = useLocalStorage('prop1');\n    const [valueService, setValueService] = useLocalStorageService<string>('service');\n    const [valueServiceObj, setValueService1] = useLocalStorageService<{ prop?: string }>('serviceObj');\n    const [useLocalStorageUseSyncExternalStoreState, setUseLocalStorageUseSyncExternalStoreState] =\n        useLocalStorageUseSyncExternalStore('useLocalStorageUseSyncExternalStore', '');\n\n    return (\n        <section className={styles.childHost}>\n            <article>\n                <h4>Props in Child2</h4>\n                <p>Работает, но надо передавать и value и setValue из родителя вглубь всех чайлдов</p>\n                <input value={parentProp} onChange={e => setValue(e.target.value)} type='text' />\n            </article>\n            <article>\n                <h4>valueInner works only in component:</h4>\n                <p>\n                    Проблемный пример использую обычный useLocalStorage и да меняется значение в localStorage но не\n                    меняется в sibling\n                </p>\n                <input value={valueInner} onChange={e => setValueInner(e.target.value)} type='text' />\n            </article>\n            <article>\n                <h4>useSyncExternalStoreState solves the problem:</h4>\n                <p>Правильный пример c useSyncExternalStoreState</p>\n                <input\n                    value={useLocalStorageUseSyncExternalStoreState || ''}\n                    onChange={e => setUseLocalStorageUseSyncExternalStoreState(e.target.value)}\n                    type='text'\n                />\n            </article>\n            <article>\n                <h4>valueService solves the problem:</h4>\n                <p>Правильный пример c valueService</p>\n                <input value={valueService || ''} onChange={e => setValueService(e.target.value)} type='text' />\n            </article>\n            <article>\n                <h4>valueServiceObj:</h4>\n                <p>Правильный пример c объектом в valueService</p>\n                <input\n                    value={valueServiceObj?.prop}\n                    onChange={e => setValueService1({ prop: e.target.value })}\n                    type='text'\n                />\n            </article>\n        </section>\n    );\n}\n\nexport default memo(StorageHookProblem);\n","import { memo, useRef } from 'react';\nimport { useLocalStorage, useSessionStorage } from '@app/hooks/storage';\nimport StorageHookProblem from '@app/components/storage-hook/storage-hook-problem.component';\nimport cn from 'classnames';\n\ntype StorageHookProps = {};\n\nconst StorageHook = memo<StorageHookProps>(function StorageHook() {\n    const ref = useRef<HTMLInputElement>(null!);\n    const ref1 = useRef<HTMLInputElement>(null!);\n    const [value, setSessionStorageValue, removeSessionStorageValue] = useSessionStorage('name');\n    const [value1, setLocalStorageValue, removeLocalStorageValue] = useLocalStorage('age');\n\n    return (\n        <div className={cn('class class1')}>\n            <section style={{ marginBottom: '30px' }}>\n                <h3>Session storage</h3>\n                <p>Value: {value}</p>\n                <input ref={ref} type='text' />\n                <button onClick={() => setSessionStorageValue(ref.current.value)}>Set sessionStorage value</button>\n                <button onClick={() => removeSessionStorageValue(ref.current.value)}>\n                    Remove sessionStorage value\n                </button>\n            </section>\n\n            <section style={{ marginBottom: '30px' }}>\n                <h3>Local storage</h3>\n                <p>Value: {value1}</p>\n                <input ref={ref1} type='text' />\n                <button onClick={() => setLocalStorageValue(ref1.current.value)}>Set local value</button>\n                <button onClick={() => removeLocalStorageValue(ref1.current.value)}>Remove local value</button>\n            </section>\n\n            <StorageHookProblem />\n        </div>\n    );\n});\n\nexport default StorageHook;\n","import React from 'react';\nimport { TabsComponent } from '../components/tabs/Tabs';\nimport StorageHook from '@app/components/storage-hook/storage-hook.component';\n\nexport default function ReactPage() {\n    return (\n        <TabsComponent>\n            <div tabName='React'>\n                {/*<AAATest />*/}\n\n                {/*<Component title='MyImage'>*/}\n                {/*    <CssScrollbarGutter />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='MyImage'>*/}\n                {/*    <MyImage />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='CssAccordion'>*/}\n                {/*    <CssAccordion />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='DetailsSummary'>*/}\n                {/*    <DetailsSummary />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='LazyImageNew'>*/}\n                {/*    <LazyImageNew />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='PictureImageSet'>*/}\n                {/*    <PictureImageSet />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='immutableArrayMethods'>*/}\n                {/*    <ImmutableArrayMethods />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='setHTML'>*/}\n                {/*    <SetHtml />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='LodashDebounce'>*/}\n                {/*    <CssVariable />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='LodashDebounce'>*/}\n                {/*    <LodashDebounce />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='CssUnits'>*/}\n                {/*    <CssUnits />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='DispatchEvent'>*/}\n                {/*    <DispatchEvent />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='MyTemplate'>*/}\n                {/*    <MyTemplateContainer />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='MyForm'>*/}\n                {/*    <MyForm />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='CustomDashedBorder'>*/}\n                {/*    <CustomDashedBorder />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='GridRepeat'>*/}\n                {/*    <GridRepeat />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='FunctionAndObjectInUseeffect'>*/}\n                {/*    <FunctionAndObjectInUseeffect />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='menu bars'>*/}\n                {/*    <MenuBars />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='read-calculate-primitives-from-props.component'>*/}\n                {/*    <ReadCalculatePrimitivesFromProps />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='This in sass example'>*/}\n                {/*    <ThisSass />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Observers'>*/}\n                {/*    <MyObservers />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Equal blocks css'>*/}\n                {/*    <EqualBlocks />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Grid examples'>*/}\n                {/*    <Grid />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Common error use useRef instead of useState'>\n                    <CommonErrorsUseFetch />\n                    <CommonErrorsUseMemo />\n                    <CommonErrorsRefInsteadState />\n                    <CommonErrorsUseCallback />\n                    <CommonErrorsUseEffect />\n                </Component>*/}\n\n                {/*<Component title='Custom tag'>*/}\n                {/*    <CustomTag>text child </CustomTag>*/}\n                {/*</Component>*/}\n\n                {/*<Component title='External Accordion'>*/}\n                {/*    <ExternalAccordionContainer />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Load lazy image'>*/}\n                {/*    <LazyImage />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='ExamplesComponent'>*/}\n                {/*    <ExamplesComponent />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='ThrottleDebounce'>*/}\n                {/*    <ThrottleDebounce />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Iframe'>*/}\n                {/*    <MyIframe />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Iframe1'>*/}\n                {/*    <MyIframe1 />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='ForwradRefUseImperativeHandle'>*/}\n                {/*    <ForwradRefUseImperativeHandle />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='TestsReduxContainer'>*/}\n                {/*    <TestsReduxContainer />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='URLSearchParamsTest'>*/}\n                {/*    <UrlSearchParams />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='RouterTestsContainer'>*/}\n                {/*    <RouterTestContainer />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='UsersTest'>*/}\n                {/*    <UsersTest />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Css mask'>*/}\n                {/*    <MyCssMask />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Aspect ratio'>*/}\n                {/*    <MyAspectRatio />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='React 18'>*/}\n                {/*    <React18Concurrent />*/}\n                {/*    <React18Batching />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='AnimateAndTransition'>*/}\n                {/*    <AnimateAndTransition />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='MatchVsTest'>*/}\n                {/*    <MatchVsTest />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Event bus'>*/}\n                {/*    <EventBus />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Parallax'>*/}\n                {/*    <Parallax />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Use memo'>*/}\n                {/*    <UseMemoHook />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Use state'>*/}\n                {/*    <UseState />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Use updatable state'>*/}\n                {/*    <UseUpdatableState />*/}\n                {/*</Component>*/}\n\n                {/*<Component title='Hooks'>*/}\n                {/*<WindowSizeHook />*/}\n                {/*<OnScreenHook />*/}\n                {/*<EventListenerHook />*/}\n                {/*<ScriptHook />*/}\n                {/*<PreviousHook />*/}\n                {/*<UpdateEffectHook />*/}\n                <StorageHook />\n                {/*</Component>*/}\n\n                {/* <Component title=\"Image preload\"> */}\n                {/*    <ImagePreload />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"ProTabs\"> */}\n                {/*    <ProTabs /> */}\n                {/* </Component> */}\n\n                {/* <Component title=\"ResizeOverflow\"> */}\n                {/*    <ResizeOverflow /> */}\n                {/* </Component> */}\n\n                {/* <Component title=\"CloneElement\"> */}\n                {/*    <CloneElementContainer /> */}\n                {/* </Component> */}\n\n                {/* <Component title=\"SessionStorage\"> */}\n                {/*    <SessionStorageParent />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"Lazy\"> */}\n                {/*    <Lazy />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"ExamplesComponent\">*/}\n                {/*    <ClassNames />*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"ExamplesComponent\">*/}\n                {/*    <VminGrid />*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"ExamplesComponent\">*/}\n                {/*    <ExamplesComponent />*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"BroadcastComponent\">*/}\n                {/*    <BroadcastComponent />*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Performance\"> */}\n                {/*    <UploadComponent />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"Performance\"> */}\n                {/*    <Performance />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"JS tips\"> */}\n                {/*  <TipsComponent />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"Hook axios get on callback\"> */}\n                {/*    <GetRequestHookOnCbComponent />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"CSS Modules\"> */}\n                {/*    <CssModuleComponent />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"Mouseover mouseleave\"> */}\n                {/*    <MouseoverMouseleave />*/}\n                {/* </Component> */}\n\n                {/*<Component title='Scroll snap align'>*/}\n                {/*    <ScrollSnapAlign />*/}\n                {/*</Component>*/}\n\n                {/* <Component title=\"Drag'n'drop\">*/}\n                {/*    <DragNDrop />*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Count up\">*/}\n                {/*    <CountupWrapper />*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Error boundary\">*/}\n                {/*    <ErrorBoundary>*/}\n                {/*        <ErrorBoundaryError/>*/}\n                {/*    </ErrorBoundary>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Error boundary\">*/}\n                {/*    <ErrorBoundary>*/}\n                {/*        <ErrorBoundaryError/>*/}\n                {/*    </ErrorBoundary>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Dropdown Menu\">*/}\n                {/*    <NavBar/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Insert HTML\">*/}\n                {/*    <DangerouslySetInnerHTML/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Array\">*/}\n                {/*    <ArrayComponent/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Fetch\">*/}\n                {/*    <Fetch />*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Skills\">*/}\n                {/*    <Skills/>*/}\n                {/* </Component>*/}\n\n                {/*<Component title='Family fetch'>*/}\n                {/*    <AxiosFamily />*/}\n                {/*    /!* <FamilyFetch />*!/*/}\n                {/*</Component>*/}\n\n                {/* <Component title=\"Container example\">*/}\n                {/*    <ContainerClass/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"HOC\">*/}\n                {/*    <HOCClass/>*/}\n                {/*    <HOCHooks/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Ref examples\">*/}\n                {/*    <RefHooks/>*/}\n                {/*    <RefClass/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Styled Components\">*/}\n                {/*    <StyledText isActive>Styled text</StyledText>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Firestore Family\">*/}\n                {/*    <FirestoreFamily/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Firestore\">*/}\n                {/*    <FireStore/>*/}\n                {/* </Component>*/}\n\n                {/*<Component title=\"AsyncSetState\">*/}\n                {/*   <AsyncSetState increaseNumber={1}/>*/}\n                {/*   <AsyncSetStateHooks increaseNumber={1}/>*/}\n                {/*</Component>*/}\n\n                {/* <Component title=\"Monsters\">*/}\n                {/*    <Monsters/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Imports\">*/}\n                {/*    <Imports/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"Grid\"> */}\n                {/*    <Grid />*/}\n                {/* </Component> */}\n\n                {/* <Component title=\"RestApiComponent\">*/}\n                {/*    <RestApiComponent/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"LifecycleHooksComponent\">*/}\n                {/*    <LifecycleHooksComponent/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"ClassBasedComponent\">*/}\n                {/*    <ClassBasedComponent/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"CommentListComponent\">*/}\n                {/*    <CommentListComponent/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"CommentListHooks\">*/}\n                {/*    <CommentListHooks/>*/}\n                {/* </Component>*/}\n\n                {/* <Component title=\"ClassBasedHooks\">*/}\n                {/*    <ClassBasedHooks/>*/}\n                {/* </Component>*/}\n            </div>\n            {/*<div tabName='JSX'>*/}\n            {/*    <JsxListComponent />*/}\n            {/*    <JsxFragment prop1='prop1' prop2='prop2' />*/}\n            {/*    <JSXExampleComponent />*/}\n            {/*</div>*/}\n        </TabsComponent>\n    );\n}\n"],"names":["TabsComponent","Component","constructor","arguments","state","activeTab","onClick","index","this","setState","prevState","prevProps","componentDidMount","props","undefined","render","children","tabsHeader","tabsBody","Children","map","child","push","getTabsHeaderView","getTabsBody","_jsxs","className","_jsx","bind","concat","tabName","crypto","randomUUID","useLocalStorage","key","defaultValue","useStorage","window","localStorage","storageObject","value","setValue","useState","jsonValue","getItem","JSON","parse","useEffect","removeItem","setItem","stringify","remove","useCallback","listeners","addListener","itemKey","callback","removeListener","filter","listener","read","e","console","error","write","item","forEach","useLocalStorageService","propName","storageService","setCurrentValue","val","valueToStore","propValue","useLocalStorageUseSyncExternalStore","initialValue","store","useSyncExternalStore","useLocalStorageSubscribe","getSnapshot","readFromLocalStorage","getLocalStorageServerSnapshot","setNewValue","nextState","Function","removeLocalStorageItem","setLocalStorageItem","addEventListener","removeEventListener","stringifiedValue","dispatchStorageEvent","newValue","dispatchEvent","StorageEvent","StorageHookProblem","_Fragment","onChange","target","type","Child1","parentProp","Child2","_ref","valueInner","setValueInner","valueService","setValueService","valueServiceObj","setValueService1","useLocalStorageUseSyncExternalStoreState","setUseLocalStorageUseSyncExternalStoreState","styles","prop","_ref2","memo","ref","useRef","ref1","setSessionStorageValue","removeSessionStorageValue","sessionStorage","value1","setLocalStorageValue","removeLocalStorageValue","cn","style","marginBottom","current","ReactPage","StorageHook"],"sourceRoot":""}