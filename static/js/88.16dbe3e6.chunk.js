"use strict";(self.webpackChunkreact_main=self.webpackChunkreact_main||[]).push([[88],{3748:(e,t,s)=>{s.d(t,{O:()=>a});var r=s(5043),n=s(579);class a extends r.Component{constructor(){super(...arguments),this.state={activeTab:0},this.onClick=e=>{this.setState(((t,s)=>({activeTab:e})))}}componentDidMount(){const{activeTab:e}=this.props;void 0!==e&&this.setState({activeTab:e})}render(){const{children:e}=this.props;if(e){const t=[],s=[];return r.Children.map(e,((e,r)=>{t.push(this.getTabsHeaderView(e,r)),s.push(this.getTabsBody(e,r))})),(0,n.jsxs)("div",{className:"tabs",children:[(0,n.jsx)("div",{className:"tabs__header",children:t}),(0,n.jsx)("div",{className:"tabs__content",children:s})]})}}getTabsHeaderView(e,t){return(0,n.jsx)("div",{onClick:this.onClick.bind(this,t),className:"tabs__header-item".concat(t===this.state.activeTab?" _active":""),children:e.props.tabName},crypto.randomUUID())}getTabsBody(e,t){return t===this.state.activeTab?(0,n.jsx)("div",{className:"tabs__content-item",children:e.props.children},t):""}}},88:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var r=s(5043),n=s(3748);function a(e,t){return i(e,t,window.localStorage)}function i(e,t,s){const[n,a]=(0,r.useState)((()=>{const r=s.getItem(e);return null!=r?JSON.parse(r):"function"===typeof t?t():t}));(0,r.useEffect)((()=>{if(void 0===n)return s.removeItem(e);s.setItem(e,JSON.stringify(n))}),[e,n,s]);const i=(0,r.useCallback)((()=>{a(void 0)}),[]);return[n,a,i]}const l=new class{constructor(){this.listeners=[]}addListener(e,t){this.listeners.push({itemKey:e,callback:t})}removeListener(e,t){this.listeners=this.listeners.filter((s=>s.itemKey!==e&&s.callback!==t))}read(e){try{return JSON.parse(window.localStorage.getItem(e)||"null")}catch(t){console.error("Reading LocalStorage error ",t)}}write(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(s){console.error("Writing LocalStorage error ",s)}this.listeners.forEach((s=>{s.itemKey===e&&s.callback(t)}))}},c=e=>{const[t,s]=(0,r.useState)((()=>l.read(e))),n=(0,r.useCallback)((s=>{const r="function"===typeof s?s(t):s;l.write(e,r)}),[e,t]);return(0,r.useEffect)((()=>{const t=e=>s(e);return l.addListener(e,t),()=>l.removeListener(e,t)}),[e]),[t,n]},o="storage-hook-problem_childHost__-N1pQ";var u=s(579);const h=()=>{const[e,t]=a("prop1");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h4",{children:"Problem"}),(0,u.jsx)("p",{children:"Value changes in parent its ok"}),(0,u.jsx)("input",{onChange:e=>t(e.target.value),type:"text"}),(0,u.jsx)(d,{parentProp:e,setValue:t}),(0,u.jsx)(p,{parentProp:e,setValue:t})]})};function d(e){let{parentProp:t,setValue:s}=e;const[r,n]=a("prop1"),[i,l]=c("service"),[h,d]=c("service1");return(0,u.jsxs)("section",{className:o,children:[(0,u.jsx)("h4",{children:"Props in Child1"}),(0,u.jsxs)("article",{children:[(0,u.jsx)("h4",{children:"parentProp:"}),(0,u.jsx)("p",{children:"\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u043e \u043d\u0430\u0434\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0438 value \u0438 setValue \u0438\u0437 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432\u0433\u043b\u0443\u0431\u044c \u0432\u0441\u0435\u0445 \u0447\u0430\u0439\u043b\u0434\u043e\u0432"}),(0,u.jsx)("input",{value:t,onChange:e=>s(e.target.value),type:"text"})]}),(0,u.jsxs)("article",{children:[(0,u.jsx)("h4",{children:"valueInner works only in component:"}),(0,u.jsx)("p",{children:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e \u043e\u0431\u044b\u0447\u043d\u044b\u0439 useLocalStorage \u0438 \u0434\u0430 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 localStorage \u043d\u043e \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0432 sibling"}),(0,u.jsx)("input",{value:r,onChange:e=>n(e.target.value),type:"text"})]}),(0,u.jsxs)("article",{children:[(0,u.jsx)("h4",{children:"valueService solves the problem:"}),(0,u.jsx)("p",{children:"\u042d\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 c valueService"}),(0,u.jsx)("input",{value:i||"",onChange:e=>l(e.target.value),type:"text"})]}),(0,u.jsxs)("article",{children:[(0,u.jsx)("h4",{children:"valueServiceObj:"}),(0,u.jsx)("p",{children:"\u042d\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 c \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u043c \u0432 valueService"}),(0,u.jsx)("input",{value:null===h||void 0===h?void 0:h.prop,onChange:e=>d({prop:e.target.value}),type:"text"})]})]})}function p(e){let{parentProp:t,setValue:s}=e;const[r,n]=a("prop1"),[i,l]=c("service"),[h,d]=c("service1");return(0,u.jsxs)("section",{className:o,children:[(0,u.jsxs)("article",{children:[(0,u.jsx)("h4",{children:"Props in Child2"}),(0,u.jsx)("p",{children:"\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u043e \u043d\u0430\u0434\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0438 value \u0438 setValue \u0438\u0437 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432\u0433\u043b\u0443\u0431\u044c \u0432\u0441\u0435\u0445 \u0447\u0430\u0439\u043b\u0434\u043e\u0432"}),(0,u.jsx)("input",{value:t,onChange:e=>s(e.target.value),type:"text"})]}),(0,u.jsxs)("article",{children:[(0,u.jsx)("h4",{children:"valueInner works only in component:"}),(0,u.jsx)("p",{children:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e \u043e\u0431\u044b\u0447\u043d\u044b\u0439 useLocalStorage \u0438 \u0434\u0430 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 localStorage \u043d\u043e \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0432 sibling"}),(0,u.jsx)("input",{value:r,onChange:e=>n(e.target.value),type:"text"})]}),(0,u.jsxs)("article",{children:[(0,u.jsx)("h4",{children:"valueService solves the problem:"}),(0,u.jsx)("p",{children:"\u042d\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 c valueService"}),(0,u.jsx)("input",{value:i||"",onChange:e=>l(e.target.value),type:"text"})]}),(0,u.jsxs)("article",{children:[(0,u.jsx)("h4",{children:"valueServiceObj:"}),(0,u.jsx)("p",{children:"\u042d\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 c \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u043c \u0432 valueService"}),(0,u.jsx)("input",{value:null===h||void 0===h?void 0:h.prop,onChange:e=>d({prop:e.target.value}),type:"text"})]})]})}const v=(0,r.memo)(h),x=(0,r.memo)((function(){const e=(0,r.useRef)(null),t=(0,r.useRef)(null),[s,n,l]=i("name",c,window.sessionStorage);var c;const[o,h,d]=a("age");return(0,u.jsxs)("div",{children:[(0,u.jsxs)("section",{style:{marginBottom:"30px"},children:[(0,u.jsx)("h3",{children:"Session storage"}),(0,u.jsxs)("p",{children:["Value: ",s]}),(0,u.jsx)("input",{ref:e,type:"text"}),(0,u.jsx)("button",{onClick:()=>n(e.current.value),children:"Set sessionStorage value"}),(0,u.jsx)("button",{onClick:()=>l(e.current.value),children:"Remove sessionStorage value"})]}),(0,u.jsxs)("section",{style:{marginBottom:"30px"},children:[(0,u.jsx)("h3",{children:"Local storage"}),(0,u.jsxs)("p",{children:["Value: ",o]}),(0,u.jsx)("input",{ref:t,type:"text"}),(0,u.jsx)("button",{onClick:()=>h(t.current.value),children:"Set local value"}),(0,u.jsx)("button",{onClick:()=>d(t.current.value),children:"Remove local value"})]}),(0,u.jsx)(v,{})]})}));function j(){return(0,u.jsx)(n.O,{children:(0,u.jsx)("div",{tabName:"React",children:(0,u.jsx)(x,{})})})}}}]);
//# sourceMappingURL=88.16dbe3e6.chunk.js.map