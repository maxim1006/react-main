"use strict";(self.webpackChunkreact_main=self.webpackChunkreact_main||[]).push([[509],{7509:(e,t,r)=>{r.r(t),r.d(t,{default:()=>lt});var o=r(5043),a=r(2166),n=r(7143),s=r(7710),d=r(6698),i=r(8901),c=r(1238);const l=Boolean({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_EMULATE);console.log({__emulate__:l});const u=l?"http://127.0.0.1:5001/maximprosv-server-ts/us-central1/functionsApp":"http://localhost:3005",p="/api/v1";var y=r(5103),h=r(8309);const f=(0,y.xP)({reducerPath:"api",baseQuery:(0,h.cw)({baseUrl:`${u}${p}`,prepareHeaders:(e,t)=>(e.set("Content-Type","application/json;charset=UTF-8"),e.set("Authorization","anonymous"),e.set("X-Request-ID",(0,c.A)()),e)}),endpoints:e=>({})}),m=(0,s.Z0)({name:"counter",initialState:0,reducers:{incrementAction:e=>e+1,decrementAction:e=>e-1}}),g=m.reducer,{incrementAction:P,decrementAction:A}=m.actions,v=(0,s.Z0)({name:"todos",initialState:{entities:[]},reducers:{addTodoAction(e,t){let{payload:r}=t;e.entities.push(r)},addTodoPreparedAction:{reducer:(e,t)=>{let{payload:r}=t;const{id:o,text:a}=r;e.entities.push({id:o,text:a,completed:!1})},prepare:e=>({payload:{text:e,id:""+Math.random()*Date.now()}})},toggleTodoAction(e,t){let{payload:r}=t;const o=e.entities.find((e=>e.id===r));o&&(o.completed=!o.completed)}}}),{addTodoPreparedAction:S,toggleTodoAction:T,addTodoAction:U}=v.actions,C=v.reducer;var E=r(3536);const D=f.injectEndpoints({endpoints:e=>({fetchUserList:e.query({query:()=>({url:"users"})}),fetchUser:e.query({async queryFn(e,t,r,o){let{userId:a}=e,{dispatch:n,getState:s}=t;s();const d=await o({url:`users/${a}`,method:"GET"});if(d.error)return d;return{data:d.data}}}),addUser:e.mutation({query:e=>{let{user:t}=e;return{url:"users",method:"POST",body:t}},async onQueryStarted(e,t){let{user:r}=e,{dispatch:o,queryFulfilled:a}=t;try{const{data:e}=await a;o(D.util.updateQueryData("fetchUserList",void 0,(t=>{t.push(e)})))}catch{console.error("addUser onQueryStarted error")}}}),addUserDebounced:e.mutation({async queryFn(e,t,r,o){var a;let{user:n,cancelDebounce:s}=e,{dispatch:d,getState:i}=t;return{data:null!==(a=await b(n,d,o))&&void 0!==a?a:null}}}),updateUser:e.mutation({query:e=>{let{user:t}=e;return{url:"users",method:"PUT",body:t}},async onQueryStarted(e,t){let{user:r}=e,{dispatch:o,queryFulfilled:a}=t;const n=o(D.util.updateQueryData("fetchUserList",void 0,(e=>{const t=e.findIndex((e=>e.id===r.id));e[t]=r})));try{await a}catch{n.undo()}}}),deleteUser:e.mutation({async queryFn(e,t,r,o){let{dispatch:a,getState:n}=t;const s=await o({url:`users/${e.id}`,method:"DELETE"});if(s.error)return s;const d=s.data;return a(D.util.updateQueryData("fetchUserList",void 0,(t=>t.filter((t=>t.id!==e.id))))),{data:d}}})}),overrideExisting:!0}),b=(0,E.debounce)((async(e,t,r)=>{const o=await r({url:"users",method:"POST",body:e});if(o.error)throw o.error;const a=o.data;return t(D.util.updateQueryData("fetchUserList",void 0,(e=>{e.push(a)}))),a}),1e3,{leading:!0}),R=(0,s.pU)({selectId:e=>e.id,sortComparer:(e,t)=>e.name&&t.name?e.name.localeCompare(t.name):0}),k=(0,s.Z0)({name:"users",initialState:R.getInitialState({loading:void 0}),reducers:{},extraReducers:e=>{e.addMatcher(D.endpoints.fetchUserList.matchFulfilled,((e,t)=>{R.setAll(e,t.payload),e.loading=!1})),e.addMatcher(D.endpoints.fetchUserList.matchPending,(e=>{e.loading=!0})),e.addMatcher(D.endpoints.fetchUserList.matchRejected,(e=>{e.loading=!1}))}}),{selectAll:I,selectById:w,selectIds:j}=R.getSelectors((e=>e.users)),x=k.reducer,O=(0,s.Z0)({name:"visibilityFilter",initialState:"SHOW_ALL",reducers:{setVisibilityFilterAction:(e,t)=>{let{payload:r}=t;return r}}}),{setVisibilityFilterAction:q}=O.actions,M=O.reducer;let $={org:"rails",repo:"rails",page:1,displayType:function(e){return e.Issues="issues",e.Comments="comments",e}({}).Issues,issueId:null};const _=(0,s.Z0)({name:"issuesDisplay",initialState:$,reducers:{displayRepo(e,t){let{payload:r}=t;const{org:o,repo:a}=r;e.org=o,e.repo=a},setCurrentPage(e,t){e.page=t.payload},setCurrentDisplayType(e,t){let{payload:r}=t;const{displayType:o,issueId:a=null}=r;e.displayType=o,e.issueId=a}}}),{displayRepo:L,setCurrentPage:F,setCurrentDisplayType:Q}=_.actions,W=_.reducer;var Z=r(2215),V=r(192);(0,s.zD)("posts/fetchAll",(async(e,t)=>{try{const{data:e}=await Z.A.get("https://jsonplaceholder.typicode.com/posts");return e}catch(r){return t.rejectWithValue(r)}}));const z=(0,s.Z0)({name:"posts",initialState:{loading:!1,entities:[]},reducers:{fetchPostsStart(e){e.loading=!0},fetchPostsSuccess(e,t){let{payload:r}=t;e.entities=r,e.loading=!1},fetchPostsError(e,t){let{payload:r}=t;e.error=r,e.loading=!1}}}),{fetchPostsSuccess:N,fetchPostsError:B,fetchPostsStart:H}=z.actions,K=z.reducer,Y=e=>e.posts,X=((0,V.Mz)([Y,(e,t)=>t],((e,t)=>{var r;return null===(r=e.entities)||void 0===r?void 0:r.filter((e=>e.title.includes(t)))})),(0,s.pU)({selectId:e=>e.id,sortComparer:(e,t)=>e.title.localeCompare(t.title)})),J=(0,s.zD)("books/fetchAll",(async(e,t)=>{try{return await Promise.resolve([{id:"1",title:"title1"},{id:"2",title:"title2"},{id:"3",title:"title3"}])}catch(r){return t.rejectWithValue(r)}})),G=(0,s.zD)("books/updateOne",(async(e,t)=>await Promise.resolve(e))),ee=X.getInitialState({loading:!1}),te=(0,s.Z0)({name:"books",initialState:ee,reducers:{removeBookAction:X.removeOne,addBookAction:X.addOne,updateBookAction:X.updateOne},extraReducers:e=>{e.addCase(J.pending,((e,t)=>{e.loading=!0})),e.addCase(J.fulfilled,((e,t)=>{let{payload:r}=t;X.upsertMany(e,r),e.loading=!1})),e.addCase(G.fulfilled,((e,t)=>{let{payload:r}=t;const{id:o,...a}=r;X.updateOne(e,{id:o,changes:a})}))}}),re=te.reducer,{removeBookAction:oe,addBookAction:ae,updateBookAction:ne}=te.actions,{selectById:se,selectIds:de,selectEntities:ie,selectAll:ce,selectTotal:le}=X.getSelectors((e=>e.books)),ue=`${u}${p}/users`,pe=(0,s.zD)("thunkUser/fetchAll",(async(e,t)=>{try{const e=await fetch(ue);return await e.json()}catch(r){return t.rejectWithValue(r)}})),ye=(0,s.zD)("thunkUser/add",(async(e,t)=>{try{const t=await fetch(ue,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});return await t.json()}catch(r){return t.rejectWithValue(r)}})),he=(0,s.zD)("thunkUser/update",(async(e,t)=>{try{const t=await fetch(ue,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});return await t.json()}catch(r){return t.rejectWithValue(r)}})),fe=(0,s.zD)("thunkUser/delete",(async(e,t)=>{try{const t=await fetch(`${ue}/${e.id}`,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});return await t.json()}catch(r){return t.rejectWithValue(r)}}));function me(e){return e.type.endsWith("/pending")}function ge(e){return e.type.endsWith("/fulfilled")}const Pe=(0,s.pU)(),Ae=Pe.getInitialState({loading:!1}),ve=(0,s.Z0)({name:"thunkUser",initialState:Ae,reducers:{},extraReducers:e=>{e.addCase(pe.fulfilled,Pe.upsertMany),e.addCase(ye.fulfilled,Pe.addOne),e.addCase(he.fulfilled,((e,t)=>{let{payload:r}=t;const{id:o,...a}=r;Pe.updateOne(e,{id:o,changes:a})})),e.addCase(fe.fulfilled,((e,t)=>{let{payload:r}=t;Pe.removeOne(e,r.id)})),e.addMatcher(me,(e=>{e.loading=!0})),e.addMatcher(ge,(e=>{e.loading=!1}))}}).reducer,{selectAll:Se}=Pe.getSelectors((e=>e.thunkUser));let Te=function(e){return e.Product1="product1",e.Product2="product2",e}({});const Ue=(0,s.pU)(),Ce=Ue.getInitialState();console.log({product1InnerPropAdapterInitialState:Ce});const Ee=(0,s.Z0)({name:"product/feature",initialState:null,reducers:{setProductFeatureNameAction(e,t){e.name=t.payload}}}),De=Ee.reducer,{setProductFeatureNameAction:be}=Ee.actions,Re=(0,s.Z0)({name:"product/product1",initialState:{},reducers:{setProduct1innerPropAction(e,t){Ue.setMany(e.product1InnerProp,t.payload)},setProduct1PropAction(e,t){e.prop=t.payload}},extraReducers:e=>{e.addDefaultCase(((e,t)=>{De(e,t)}))}}),ke=Re.reducer,{setProduct1innerPropAction:Ie,setProduct1PropAction:we}=Re.actions,je=(0,s.pU)({}),xe=(je.getInitialState(),(0,s.Z0)({name:"product/product2",initialState:null,reducers:{setProduct2innerPropAction(e,t){je.setMany(e.product2InnerProp,t.payload)}},extraReducers:e=>{e.addDefaultCase(((e,t)=>{De(e,t)}))}})),Oe=xe.reducer,{setProduct2innerPropAction:qe}=xe.actions,Me=(0,s.VP)("product/setProductAction"),$e=((0,s.VP)("product/resetProductAction"),{type:Te.Product1,product1InnerProp:Ce}),_e=(0,s.Z0)({name:"product",initialState:$e,reducers:{setProductTypeAction(e,t){e.type=t.payload}},extraReducers(e){e.addCase(Me,((e,t)=>({...e,...t.payload}))),e.addDefaultCase(((e,t)=>((e,t)=>{switch(null===e||void 0===e?void 0:e.type){case Te.Product1:return ke(e,t);case Te.Product2:return Oe(e,t)}})(e,t)))}}),{setProductTypeAction:Le}=_e.actions,Fe=_e.reducer;let Qe=function(e){return e.XRequestId="x-request-id",e}({}),We=function(e){return e.ConditionError="ConditionError",e}({});const Ze=[],Ve=e=>e=>t=>{if((0,s.TK)(t)){var r,o,a,n,d,i,c;let e=null===(r=t.meta)||void 0===r||null===(o=r.baseQueryMeta)||void 0===o||null===(a=o.request)||void 0===a?void 0:a.headers,s=null===(n=t.meta)||void 0===n||null===(d=n.baseQueryMeta)||void 0===d||null===(i=d.response)||void 0===i?void 0:i.headers;if(e)for(let t of e)console.log("headersReq",t);if(s)for(let t of s)console.log("headersRes",t);t.error.name===We.ConditionError||Ze.includes(null===(c=t.meta.arg.arg)||void 0===c?void 0:c.endpointName)||function(e){var t,r,o,a;const n=e.meta;if(!n)return console.error("logRequestError Action doesn't contain 'meta'",e);const{request:s,response:d}=n.baseQueryMeta;if(!s&&!d)return console.error(`Request/response error: ${n.baseQueryMeta}`);const{method:i,url:c}=null!==s&&void 0!==s?s:{},{status:l,statusText:u}=null!==d&&void 0!==d?d:{},p=(null===(t=e.meta)||void 0===t||null===(r=t.baseQueryMeta)||void 0===r||null===(o=r.request)||void 0===o?void 0:o.headers)||[],y=null===(a=[...p].find((e=>{let[t]=e;return t===Qe.XRequestId})))||void 0===a?void 0:a[1];console.group(`ERROR: ${i} ${c}`),console.log(`STATUS: ${l}`),console.log(`STATUS-TEXT: ${u}`),console.log(`X-REQUEST-ID: ${y}`),n.arg&&console.log(`RTK QUERY: ${n.arg.type} ${n.arg.endpointName}`);e.payload&&(console.groupCollapsed("PAYLOAD"),console.log(JSON.stringify(e.payload,null,4)),console.groupEnd());console.groupEnd()}(t)}return e(t)};const ze={key:"root",version:1,storage:i.A,whitelist:["todos"]},Ne=(0,d.rL)(ze,re),Be=(0,n.HY)({counter:g,todos:C,users:x,visibilityFilter:M,books:Ne,issuesDisplay:W,posts:K,thunkUser:ve,product:Fe,[f.reducerPath]:f.reducer}),He=(0,s.U1)({reducer:Be,preloadedState:{},middleware:e=>e({thunk:{extraArgument:{fetchPolicy:"cache-first"}},immutableCheck:!1,serializableCheck:{ignoredActions:[d.ZM,d.r2,d.Hz,d.DY,d.Cq,d.eY]}}).concat(f.middleware,Ve),devTools:!1});(0,h.$k)(He.dispatch);const Ke=He,Ye=(0,d.GM)(He);var Xe=r(4730),Je=r(4600),Ge=r.n(Je),et=r(1603);const tt=(0,n.HY)({protectedProps:e=>null!==e&&void 0!==e?e:{prop:0,prop1:""}});function rt(e,t){const[r,a]=function(e,t){const r={...e,protectedProps:t},{protectedReducer:o,protectedActions:a}=function(){const e=(0,s.VP)(`${(0,s.Ak)()}/updateProtectedProps`);return{protectedReducer:(t,r)=>t&&e.match(r)?(0,et.jM)(t,(e=>{e.protectedProps={...e.protectedProps,...r.payload}})):tt(t,r),protectedActions:{protectedAction:e}}}();return[(0,s.U1)({preloadedState:r,reducer:o}),a]}(e,t);return o.useEffect((()=>{r.dispatch(a.protectedAction(t))}),[t,a,r]),r}const ot=e=>e.protectedProps,at=e=>ot(e).prop,nt=e=>ot(e).prop1;var st=r(579);const dt=(0,o.memo)((()=>{const e=rt({},{prop:37,prop1:"Max"});return(0,st.jsx)(a.Kq,{store:e,children:(0,st.jsx)("div",{className:Ge()("taStoreWithProtectedAction"),children:(0,st.jsx)(it,{})})})}));function it(){const e=(0,a.d4)(at),t=(0,a.d4)(nt);return(0,st.jsxs)(st.Fragment,{children:[e," ",t]})}const ct=()=>(0,st.jsx)(a.Kq,{store:Ke,children:(0,st.jsx)(Xe.Q,{loading:null,persistor:Ye,children:(0,st.jsx)(dt,{})})}),lt=(0,o.memo)(ct)}}]);
//# sourceMappingURL=509.25963414.chunk.js.map